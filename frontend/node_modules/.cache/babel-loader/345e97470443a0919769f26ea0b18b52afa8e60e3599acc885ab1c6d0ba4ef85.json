{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from '../../utils/axios';\nexport const createTweet = createAsyncThunk('tweets/createTweet', async (tweetData, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post('/tweets', tweetData);\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const likeTweet = createAsyncThunk('tweets/likeTweet', async (tweetId, {\n  rejectWithValue\n}) => {\n  try {\n    await axios.post(`/tweets/${tweetId}/like`);\n    return tweetId;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const unlikeTweet = createAsyncThunk('tweets/unlikeTweet', async (tweetId, {\n  rejectWithValue\n}) => {\n  try {\n    await axios.delete(`/tweets/${tweetId}/like`);\n    return tweetId;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const retweet = createAsyncThunk('tweets/retweet', async (tweetId, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`/tweets/${tweetId}/retweet`);\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const fetchHomeTimeline = createAsyncThunk('tweets/fetchHomeTimeline', async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.get('/tweets/timeline');\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const fetchUserTweets = createAsyncThunk('tweets/fetchUserTweets', async (username, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.get(`/tweets/user/${username}`);\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nconst initialState = {\n  tweets: [],\n  loading: false,\n  error: null\n};\nconst tweetSlice = createSlice({\n  name: 'tweets',\n  initialState,\n  reducers: {\n    clearError: state => {\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Create Tweet\n    .addCase(createTweet.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(createTweet.fulfilled, (state, action) => {\n      state.loading = false;\n      state.tweets.unshift(action.payload);\n    }).addCase(createTweet.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n    // Like Tweet\n    .addCase(likeTweet.fulfilled, (state, action) => {\n      const tweet = state.tweets.find(t => t.id === action.payload);\n      if (tweet) {\n        tweet.likedBy.push(action.payload);\n        tweet.likeCount += 1;\n      }\n    })\n    // Unlike Tweet\n    .addCase(unlikeTweet.fulfilled, (state, action) => {\n      const tweet = state.tweets.find(t => t.id === action.payload);\n      if (tweet) {\n        tweet.likedBy = tweet.likedBy.filter(id => id !== action.payload);\n        tweet.likeCount -= 1;\n      }\n    })\n    // Retweet\n    .addCase(retweet.fulfilled, (state, action) => {\n      state.tweets.unshift(action.payload);\n    })\n    // Fetch Home Timeline\n    .addCase(fetchHomeTimeline.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(fetchHomeTimeline.fulfilled, (state, action) => {\n      state.loading = false;\n      state.tweets = action.payload;\n    }).addCase(fetchHomeTimeline.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n    // Fetch User Tweets\n    .addCase(fetchUserTweets.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(fetchUserTweets.fulfilled, (state, action) => {\n      state.loading = false;\n      state.tweets = action.payload;\n    }).addCase(fetchUserTweets.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  clearError\n} = tweetSlice.actions;\nexport default tweetSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","createTweet","tweetData","rejectWithValue","response","post","data","error","likeTweet","tweetId","unlikeTweet","delete","retweet","fetchHomeTimeline","_","get","fetchUserTweets","username","initialState","tweets","loading","tweetSlice","name","reducers","clearError","state","extraReducers","builder","addCase","pending","fulfilled","action","unshift","payload","rejected","tweet","find","t","id","likedBy","push","likeCount","filter","actions","reducer"],"sources":["C:/Users/Steve/Desktop/TwitterCloneAI/frontend/src/store/slices/tweetSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from '../../utils/axios';\r\n\r\nexport const createTweet = createAsyncThunk(\r\n  'tweets/createTweet',\r\n  async (tweetData, { rejectWithValue }) => {\r\n    try {\r\n      const response = await axios.post('/tweets', tweetData);\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const likeTweet = createAsyncThunk(\r\n  'tweets/likeTweet',\r\n  async (tweetId, { rejectWithValue }) => {\r\n    try {\r\n      await axios.post(`/tweets/${tweetId}/like`);\r\n      return tweetId;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const unlikeTweet = createAsyncThunk(\r\n  'tweets/unlikeTweet',\r\n  async (tweetId, { rejectWithValue }) => {\r\n    try {\r\n      await axios.delete(`/tweets/${tweetId}/like`);\r\n      return tweetId;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const retweet = createAsyncThunk(\r\n  'tweets/retweet',\r\n  async (tweetId, { rejectWithValue }) => {\r\n    try {\r\n      const response = await axios.post(`/tweets/${tweetId}/retweet`);\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchHomeTimeline = createAsyncThunk(\r\n  'tweets/fetchHomeTimeline',\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const response = await axios.get('/tweets/timeline');\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchUserTweets = createAsyncThunk(\r\n  'tweets/fetchUserTweets',\r\n  async (username, { rejectWithValue }) => {\r\n    try {\r\n      const response = await axios.get(`/tweets/user/${username}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nconst initialState = {\r\n  tweets: [],\r\n  loading: false,\r\n  error: null,\r\n};\r\n\r\nconst tweetSlice = createSlice({\r\n  name: 'tweets',\r\n  initialState,\r\n  reducers: {\r\n    clearError: (state) => {\r\n      state.error = null;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // Create Tweet\r\n      .addCase(createTweet.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(createTweet.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.tweets.unshift(action.payload);\r\n      })\r\n      .addCase(createTweet.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n      // Like Tweet\r\n      .addCase(likeTweet.fulfilled, (state, action) => {\r\n        const tweet = state.tweets.find((t) => t.id === action.payload);\r\n        if (tweet) {\r\n          tweet.likedBy.push(action.payload);\r\n          tweet.likeCount += 1;\r\n        }\r\n      })\r\n      // Unlike Tweet\r\n      .addCase(unlikeTweet.fulfilled, (state, action) => {\r\n        const tweet = state.tweets.find((t) => t.id === action.payload);\r\n        if (tweet) {\r\n          tweet.likedBy = tweet.likedBy.filter((id) => id !== action.payload);\r\n          tweet.likeCount -= 1;\r\n        }\r\n      })\r\n      // Retweet\r\n      .addCase(retweet.fulfilled, (state, action) => {\r\n        state.tweets.unshift(action.payload);\r\n      })\r\n      // Fetch Home Timeline\r\n      .addCase(fetchHomeTimeline.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchHomeTimeline.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.tweets = action.payload;\r\n      })\r\n      .addCase(fetchHomeTimeline.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n      // Fetch User Tweets\r\n      .addCase(fetchUserTweets.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchUserTweets.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.tweets = action.payload;\r\n      })\r\n      .addCase(fetchUserTweets.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { clearError } = tweetSlice.actions;\r\nexport default tweetSlice.reducer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}