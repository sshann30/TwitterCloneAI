{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api/v1';\nexport const createPoll = createAsyncThunk('polls/createPoll', async ({\n  messageId,\n  question,\n  options,\n  endTime\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`${API_URL}/polls/create`, {\n      messageId,\n      question,\n      options,\n      endTime\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const vote = createAsyncThunk('polls/vote', async ({\n  pollId,\n  optionId\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`${API_URL}/polls/${pollId}/vote`, {\n      optionId\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const removeVote = createAsyncThunk('polls/removeVote', async (pollId, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.delete(`${API_URL}/polls/${pollId}/vote`);\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const getPollResults = createAsyncThunk('polls/getResults', async (pollId, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.get(`${API_URL}/polls/${pollId}/results`);\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nconst pollSlice = createSlice({\n  name: 'polls',\n  initialState: {\n    polls: {},\n    loading: false,\n    error: null\n  },\n  reducers: {\n    updatePoll: (state, action) => {\n      const poll = action.payload;\n      state.polls[poll.id] = poll;\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Create Poll\n    .addCase(createPoll.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(createPoll.fulfilled, (state, action) => {\n      state.loading = false;\n      state.polls[action.payload.id] = action.payload;\n    }).addCase(createPoll.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n    // Vote\n    .addCase(vote.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(vote.fulfilled, (state, action) => {\n      state.loading = false;\n      state.polls[action.payload.id] = action.payload;\n    }).addCase(vote.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n    // Remove Vote\n    .addCase(removeVote.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(removeVote.fulfilled, (state, action) => {\n      state.loading = false;\n      state.polls[action.payload.id] = action.payload;\n    }).addCase(removeVote.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n    // Get Results\n    .addCase(getPollResults.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(getPollResults.fulfilled, (state, action) => {\n      state.loading = false;\n      const pollId = action.payload.id;\n      if (state.polls[pollId]) {\n        state.polls[pollId] = {\n          ...state.polls[pollId],\n          ...action.payload\n        };\n      }\n    }).addCase(getPollResults.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  updatePoll\n} = pollSlice.actions;\nexport default pollSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","API_URL","process","env","REACT_APP_API_URL","createPoll","messageId","question","options","endTime","rejectWithValue","response","post","data","error","vote","pollId","optionId","removeVote","delete","getPollResults","get","pollSlice","name","initialState","polls","loading","reducers","updatePoll","state","action","poll","payload","id","extraReducers","builder","addCase","pending","fulfilled","rejected","actions","reducer"],"sources":["C:/Users/Steve/Desktop/TwitterCloneAI/frontend/src/store/slices/pollSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api/v1';\r\n\r\nexport const createPoll = createAsyncThunk(\r\n  'polls/createPoll',\r\n  async ({ messageId, question, options, endTime }, { rejectWithValue }) => {\r\n    try {\r\n      const response = await axios.post(`${API_URL}/polls/create`, {\r\n        messageId,\r\n        question,\r\n        options,\r\n        endTime\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const vote = createAsyncThunk(\r\n  'polls/vote',\r\n  async ({ pollId, optionId }, { rejectWithValue }) => {\r\n    try {\r\n      const response = await axios.post(`${API_URL}/polls/${pollId}/vote`, {\r\n        optionId\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const removeVote = createAsyncThunk(\r\n  'polls/removeVote',\r\n  async (pollId, { rejectWithValue }) => {\r\n    try {\r\n      const response = await axios.delete(`${API_URL}/polls/${pollId}/vote`);\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const getPollResults = createAsyncThunk(\r\n  'polls/getResults',\r\n  async (pollId, { rejectWithValue }) => {\r\n    try {\r\n      const response = await axios.get(`${API_URL}/polls/${pollId}/results`);\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nconst pollSlice = createSlice({\r\n  name: 'polls',\r\n  initialState: {\r\n    polls: {},\r\n    loading: false,\r\n    error: null\r\n  },\r\n  reducers: {\r\n    updatePoll: (state, action) => {\r\n      const poll = action.payload;\r\n      state.polls[poll.id] = poll;\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // Create Poll\r\n      .addCase(createPoll.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(createPoll.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.polls[action.payload.id] = action.payload;\r\n      })\r\n      .addCase(createPoll.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n      // Vote\r\n      .addCase(vote.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(vote.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.polls[action.payload.id] = action.payload;\r\n      })\r\n      .addCase(vote.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n      // Remove Vote\r\n      .addCase(removeVote.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(removeVote.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.polls[action.payload.id] = action.payload;\r\n      })\r\n      .addCase(removeVote.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n      // Get Results\r\n      .addCase(getPollResults.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(getPollResults.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        const pollId = action.payload.id;\r\n        if (state.polls[pollId]) {\r\n          state.polls[pollId] = { ...state.polls[pollId], ...action.payload };\r\n        }\r\n      })\r\n      .addCase(getPollResults.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      });\r\n  }\r\n});\r\n\r\nexport const { updatePoll } = pollSlice.actions;\r\nexport default pollSlice.reducer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}